#### 9.1 DMA 技术的作用

 * 如果不采用 DMA 传输技术，而仅采用传统的 I/O 口传输，则一般需要 CPU 作为中介。CPU 的执行速度限定了传送的最大的速度（约为几十 kb/s）, 同时占用 CPU 的工作时间；而采用 DMA 传输，可以使外设直接与存储进行数据交换，CPU 放弃总线控制权，不再担当数据传输的中介，**提高传输速度且不再占用 CPU 的时间**；
 * 进行 DMA 传输时，CPU 可以去干其他事情。

#### 9.2 DMA 的优点

数据传输不需要占用 CPU，由 DMA 硬件来控制，数据直接在内存外设之间交换，可以达到很高的传输速率（可达几 MB/秒）

#### 9.3 DMA 的流程

![[Pasted image 20230314170544.png|475]]

1. 外设向 DMAC 发出请求；
2. DMAC 通过 HOLD 向 CPU 发出总线请求；
3. CPU 响应释放三总线，并且发应答 HLDA；
4. DMAC 向外设发 DMA 应答；
5. DMAC 发出地址、控制信号，为外设传送数据；
6. 传送完规定的数据后，DMAC 撤销 HOLD 信号，CPU 也撤销 HLDA 信号，并且恢复对三总线的控制。

#### 9.4 中断的定义

CPU 执行程序时，由于发生了某种随机的事件 (外部或内部)，引起 CPU 暂时**中断正在运行的程序**，转去**执行一段特殊的服务程序** (称为中断服务程序或中断处理程序)，以处理该事件，该事件处理完后又**返回**被中断的程序**继续执行**，这一过程称为中断。

#### 9.4 中断的过程

* **中断请求**：中断源提供中断请求；
* **中断判优**：根据仲裁器判断各个中断的优先级；
* **中断响应**：若发出请求的中断源之前没有优先级更高的中断发出请求，则开始中断响应；
* **中断服务**：保护现场之后，程序跳转到中断向量对应的入口地址，执行中断服务；
* **中断返回**：中断服务程序执行完毕后，最终会根据之前保护的现场返回之前程序的运行状态。
 